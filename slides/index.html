<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Scala workshop - idiomatic error handling</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">

<section id="intro" class="content" data-markdown><script type="text/template">
## Idiomatic error handling in Scala


</script></section>
<section id="objectives" class="content" data-markdown><script type="text/template">
## Objectives

Understand the main principles, paradigms and data structures used for error
handling in Scala.

</script></section>
<section id="how" class="content" data-markdown><script type="text/template">
## What we'll do

- A bit of theory
- Playing in the REPL
- Some exercises

</script></section>
<section id="overview" class="content" data-markdown><script type="text/template">
## Workshop Overview

- General Principles
- `Option`
- `Try`
- `Either`

</script></section>
<section id="logistics" class="content" data-markdown><script type="text/template">
## Logistics!

Clone this repo to get started:
//FIXME: Add link
```
git clone 
```
- Pairing is encouraged!
- Feel free to <strike>heckle</strike> ask questions.
- Help your friends if they get stuck!
- By the way, do we all know each other?

</script></section>
<section>
	<section id="principles" class="content" data-markdown><script type="text/template">
## General principles!
	</script></section>
	<section class="content" data-markdown><script type="text/template">
## What's Scala about anyway
- Functional
- Type safe
	</script></section>
	<section class="content" data-markdown><script type="text/template">
## Error handling should...
- Avoid side-effects
- Be expressed through the type system

Have as much errors as possible caught at compile-time.
	</script></section>
	<section class="content" data-markdown><script type="text/template">
## Achieving idiomatic error handling
- Algebraic Data Types (disjoint unions)
- Functional sequential composition

Enough fancy words, let's get some practice.
	</script></section>
</section>
<section>
	<section id="option" class="content" data-markdown><script type="text/template">
## `Option`
	</script></section>
	<section class="content" data-markdown><script type="text/template">
## Handling optional values

```scala
trait CatStore {
  def putCat(cat: Cat): Unit
  def getCat(name: String): Option[Cat]
}
```

	</script></section>
	<section class="content" data-markdown><script type="text/template">
## `Option`

```scala
sealed trait Option[T]
case object None extends Option[Nothing]
case class Some(value: T) extends Option[T]
```
	</script></section>
	<section class="content" data-markdown><script type="text/template">
## Working with options

Creating options
```
scala> val o1 = Some(1)
o1: Some[Int] = Some(1)

scala> val o2 = None
o2: None.type = None

scala> o1.isDefined
res0: Boolean = true

scala> o2.isDefined
res2: Boolean = false
```

	</script></section>
	<section class="content" data-markdown><script type="text/template">
## Working with options (2)

Creating options
```
scala> Option.empty[Int]
res3: Option[Int] = None

scala> Option(1)
res4: Option[Int] = Some(1)

```

	</script></section>
	<section class="content" data-markdown><script type="text/template">
## Working with options (2)

Manipulating options
```
scala> Option.empty[Int]
res3: Option[Int] = None

scala> Option(1)
res4: Option[Int] = Some(1)

```

	</script></section>
	<section class="content" data-markdown><script type="text/template">
## Exercise: CatStore (1)


//FIXME: example!
	</script></section>
	<section class="content" data-markdown><script type="text/template">
## Exercise: CatStore (2)


//FIXME: example!
	</script></section>
	<section class="content" data-markdown><script type="text/template">
## Aside: let's talk about null

> I call it my billion-dollar mistake. It was the invention of the null reference in 1965. [...] My goal was to ensure that all use of references should be absolutely safe, with checking performed automatically by the compiler. But I couldn't resist the temptation to put in a null reference [...]. This has led to innumerable errors, vulnerabilities, and system crashes, which have probably caused a billion dollars of pain and damage in the last forty years.


[Check out Tony Hoare's talk](https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare)
	</script></section>
	<section class="content" data-markdown><script type="text/template">
## Exercise: Handling null



	</script></section>
	<section class="content" data-markdown><script type="text/template">
## What about `.get`?

Using `.get` brings us back in the messy world of runtime exceptions and should be avoided.

- Check the scaladoc for alternatives when tempted to use it.
- If you're certain a value can't be `None`, try to refactor your model to remove the option. Case classes are cheap!
	</script></section>
</section>
<section>
	<section id="try" class="content" data-markdown><script type="text/template">
## `Try`
	</script></section>
	<section class="content" data-markdown><script type="text/template">
## So I heard you don't like checked exceptions...

Fine. Exceptions are unchecked now. Happy?
	</script></section>
	<section class="content" data-markdown><script type="text/template">
## OK but...

```

```
	</script></section>
	<section class="content" data-markdown><script type="text/template">
## Aside: Try and Futures

`Future` is `Try`'s dual, representating asynchronous computations (that might fail).

	</script></section>
</section>
<section>
	<section id="either" class="content" data-markdown><script type="text/template">
## `Either`
	</script></section>
	<section class="content" data-markdown><script type="text/template">
## Business errors vs system errors
	</script></section>
</section>
<section>
	<section id="conclusion" class="content" data-markdown><script type="text/template">
## Wrapping it up...
We've learnt how to use algebraic data types and function composition to handle business and system errors.

By the way! Congratulations, you now have practiced using Monads as well.
	</script></section>
	<section class="content" data-markdown><script type="text/template">
## When to use what
//TODO: table summarising option vs either vs try
	</script></section>
	<section class="content" data-markdown><script type="text/template">
## Going further!

- 
	</script></section>
</section>




			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				history: true,
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
